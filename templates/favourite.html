
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Favourite Songs | Isai Mini</title>

<style>
body{
    margin:0;
    font-family:Segoe UI,sans-serif;
    background:linear-gradient(135deg,#87ceeb,#b0e0e6);
}

.navbar{
    display:flex;
    justify-content:flex-end;
    gap:25px;
    padding:20px 40px;
}

.song{
    width:70%;
    margin:15px auto;
    padding:15px 20px;
    background:rgba(255,255,255,.6);
    border-radius:16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
}

.song-info{
    cursor:pointer;
}

.heart{
    font-size:22px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="navbar">
    <a href="/listener-dashboard">Home</a>
    <a href="/playlist">Playlist</a>
    <a href="/logout">Logout</a>
</div>

{% for song in songs %}
<div class="song">
    <div class="song-info"
         onclick="play('{{ url_for('static', filename=song.file_path) }}')">
        <b>{{ song.title }}</b><br>
        <small>{{ song.artist_name }}</small>
    </div>
   <div class="heart {% if song.id in favorite_ids %}liked{% endif %}" 
     onclick="toggleLike({{ song.id }}, this)">
    ❤️
</div>

</div>
{% endfor %}

<audio id="player" controls style="width:70%;margin:20px auto;display:block;"></audio>

<script>
function play(src){
    const p = document.getElementById("player");
    p.src = src;
    p.play();
}

function unlike(songId, el){
    fetch(`/unlike-song/${songId}`, {method:"POST"})
        .then(()=>el.closest(".song").remove());
}
</script>

</body>
</html>
